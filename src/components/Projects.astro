---
const res = await fetch(`${Astro.url}api/project-titles.json`);
const data = await res.json();
---

<div class="section mt-5 mb-0 border-bottom-0">
  <div class="container">
    <div class="heading-block text-center m-0">
      <h3>Our Projects</h3>
    </div>
  </div>
</div>

<div id="portfolio" class="portfolio row g-5 px-4 portfolio-reveal">
  {
    data.map((project, index) => (
      <article class="portfolio-item col-6 col-md-4 col-lg-3 pf-media pf-icons bounceInDown">
        <div class="grid-inner rounded">
          <div class="portfolio-image">
            <a href="portfolio-single.html">
              <img src={project.image} alt={project.name} />
            </a>
            <div class="bg-overlay">
              <div
                class="bg-overlay-content dark"
                data-hover-animate="fadeIn"
                data-hover-parent=".portfolio-item"
              >
                <a
                  href="images/portfolio/full/1.jpg"
                  class="overlay-trigger-icon bg-light text-dark"
                  data-hover-animate="fadeInDownSmall"
                  data-hover-animate-out="fadeOutUpSmall"
                  data-hover-speed="350"
                  data-hover-parent=".portfolio-item"
                  data-lightbox="image"
                  title="Image"
                >
                  <i class="uil uil-plus" />
                </a>
                <a
                  href="portfolio-single.html"
                  class="overlay-trigger-icon bg-light text-dark"
                  data-hover-animate="fadeInDownSmall"
                  data-hover-animate-out="fadeOutUpSmall"
                  data-hover-speed="350"
                  data-hover-parent=".portfolio-item"
                >
                  <i class="uil uil-ellipsis-h" />
                </a>
              </div>
              <div
                class="bg-overlay-bg dark"
                data-hover-animate="fadeIn"
                data-hover-parent=".portfolio-item"
              ></div>
            </div>
          </div>
          <div class="portfolio-desc">
            <h3>
              <a href="portfolio-single.html">{project.name}</a>
            </h3>
            {/* <span>
              <a href="#">Media</a>, <a href="#">Icons</a>
            </span> */}
          </div>
        </div>
      </article>
    ))
  }
</div>

<a href="portfolio.html" class="button button-full button-dark text-center text-end mb-6">
  <div class="container">
    And many more . <strong>See More</strong>
    <i class="fa-solid fa-caret-right" style="top:4px;"></i>
  </div>
</a>


<style>
  /* Add these CSS styles */
  .portfolio-image {
    position: relative;
    padding-top: 100%; /* 1:1 aspect ratio (square) */
    overflow: hidden;
  }
  
  .portfolio-image img {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    /* object-fit: cover;  */
    /* Ensures images cover the container */
    object-fit: fill;
  }
  
  .bg-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
  }
  
  /* Optional: Add smooth transition for hover effects */
  .bg-overlay-bg,
  .overlay-trigger-icon {
    transition: all 0.35s ease;
  }
  </style>